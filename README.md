Crazyflie Drone MPC with Motion Capture
System Overview

This project implements a Model Predictive Control (MPC) system for the Crazyflie 2.1 drone. It uses real-time data from a Vicon motion capture system to achieve precise flight control, integrating with ROS2 and the Crazyswarm2 environment.
Mathematical Representation
State Variables

The state vector xx of the drone includes:

    Position: p=[px,py,pz]Tp=[px​,py​,pz​]T
    Velocity: v=[vx,vy,vz]Tv=[vx​,vy​,vz​]T
    Orientation (Euler Angles): θ=[θroll,θpitch,θyaw]Tθ=[θroll​,θpitch​,θyaw​]T

Control Inputs

The control input vector uu consists of:

    Roll angle command: urolluroll​
    Pitch angle command: upitchupitch​
    Yaw rate command: uyawuyaw​
    Thrust command: uthrustuthrust​

Drone Dynamics Model

The dynamics of the drone are expressed as:

    Translational Dynamics:
    mp¨=uthrust−mgk^+D
    mp¨​=uthrust​−mgk^+D

    Where mm is the mass, gg is the acceleration due to gravity, k^k^ is the unit vector in the vertical direction, uthrustuthrust​ represents the thrust force vector, and DD accounts for drag forces.

    Rotational Dynamics:
    Iω˙=τ−ω×Iω
    Iω˙=τ−ω×Iω

    Where II is the inertia matrix, ωω is the angular velocity, and ττ represents the torque vector generated by the control inputs.

Cost Function

The MPC optimizes the following cost function:
J=∑k=0N−1(xk−xref,k)TQ(xk−xref,k)+(uk−uref,k)TR(uk−uref,k)+(xN−xref,N)TP(xN−xref,N)J=∑k=0N−1​(xk​−xref,k​)TQ(xk​−xref,k​)+(uk​−uref,k​)TR(uk​−uref,k​)+(xN​−xref,N​)TP(xN​−xref,N​)
Where QQ, RR, and PP are weight matrices for the state error, control effort, and terminal state error, respectively.
Prediction Horizon and Optimization

    Horizon Length (NN): Number of steps the MPC predicts into the future.
    Total Prediction Time (TfTf​): Total duration into the future for which predictions are made.

Installation and Usage

[Installation and setup instructions similar to the first draft provided.]
Example Flights and Results

[Include details of tests, simulations, and outcomes.]
Contributing and License

[Details on how to contribute to the project and the licensing information.]
Acknowledgements

[Credit contributors, funding sources, and any institutional support.]
